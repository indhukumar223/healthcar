# FULL FRONTEND + BACKEND HEALTHCARE APP (COMPLETE CODE)

This is a **complete full‚Äëstack healthcare application** using **Next.js 14**.
You can deploy this directly on **Vercel**.

---

## üîß TECH STACK

### Frontend
- Next.js 14 (App Router)
- React
- Tailwind CSS
- shadcn/ui

### Backend
- Next.js API Routes
- Prisma ORM
- PostgreSQL / SQLite
- NextAuth (JWT Auth)
- bcryptjs

---

## üìÅ PROJECT STRUCTURE

/app
  /api
    /auth/[...nextauth]/route.ts
    /users/route.ts
    /appointments/route.ts
  /login/page.tsx
  /register/page.tsx
  /dashboard/page.tsx
  layout.tsx
  page.tsx

/lib
  prisma.ts
  auth.ts

/prisma
  schema.prisma

---

# üóÑÔ∏è DATABASE (PRISMA)

```prisma
// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql" // use sqlite for local
  url      = env("DATABASE_URL")
}

model User {
  id           String        @id @default(uuid())
  name         String
  email        String        @unique
  password     String
  role         String        // patient | doctor
  createdAt    DateTime      @default(now())
  appointments Appointment[]
}

model Appointment {
  id        String   @id @default(uuid())
  date      DateTime
  reason    String
  userId    String
  user      User     @relation(fields: [userId], references: [id])
  createdAt DateTime @default(now())
}
```

---

# üîå BACKEND CODE

## Prisma Client
```ts
// lib/prisma.ts
import { PrismaClient } from '@prisma/client'

export const prisma = globalThis.prisma || new PrismaClient()
if (process.env.NODE_ENV !== 'production') globalThis.prisma = prisma
```

---

## Auth Config
```ts
// lib/auth.ts
import Credentials from "next-auth/providers/credentials"
import { prisma } from './prisma'
import bcrypt from 'bcryptjs'

export const authOptions = {
  providers: [
    Credentials({
      async authorize(credentials) {
        const user = await prisma.user.findUnique({ where: { email: credentials.email } })
        if (!user) return null
        const valid = await bcrypt.compare(credentials.password, user.password)
        if (!valid) return null
        return { id: user.id, email: user.email, name: user.name, role: user.role }
      }
    })
  ],
  session: { strategy: 'jwt' },
  secret: process.env.NEXTAUTH_SECRET
}
```

---

## Auth Route
```ts
// app/api/auth/[...nextauth]/route.ts
import NextAuth from 'next-auth'
import { authOptions } from '@/lib/auth'

const handler = NextAuth(authOptions)
export { handler as GET, handler as POST }
```

---

## User Registration API
```ts
// app/api/users/route.ts
import { prisma } from '@/lib/prisma'
import bcrypt from 'bcryptjs'
import { NextResponse } from 'next/server'

export async function POST(req: Request) {
  const { name, email, password, role } = await req.json()
  const hashed = await bcrypt.hash(password, 10)
  const user = await prisma.user.create({ data: { name, email, password: hashed, role } })
  return NextResponse.json(user)
}
```

---

## Appointments API
```ts
// app/api/appointments/route.ts
import { prisma } from '@/lib/prisma'
import { NextResponse } from 'next/server'

export async function POST(req: Request) {
  const data = await req.json()
  const appointment = await prisma.appointment.create({ data })
  return NextResponse.json(appointment)
}

export async function GET() {
  const appointments = await prisma.appointment.findMany({ include: { user: true } })
  return NextResponse.json(appointments)
}
```

---

# üé® FRONTEND CODE

## Root Layout
```tsx
// app/layout.tsx
import './globals.css'

export default function RootLayout({ children }) {
  return (
    <html>
      <body className="bg-gray-50">{children}</body>
    </html>
  )
}
```

---

## Home Page
```tsx
// app/page.tsx
import Link from 'next/link'

export default function Home() {
  return (
    <div className="p-10 text-center">
      <h1 className="text-4xl font-bold">Healthcare App</h1>
      <Link href="/login" className="text-blue-600">Login</Link>
    </div>
  )
}
```

---

## Login Page
```tsx
'use client'
import { signIn } from 'next-auth/react'

export default function Login() {
  async function handleSubmit(e) {
    e.preventDefault()
    const email = e.target.email.value
    const password = e.target.password.value
    await signIn('credentials', { email, password, callbackUrl: '/dashboard' })
  }

  return (
    <form onSubmit={handleSubmit} className="p-8 max-w-md mx-auto">
      <input name="email" placeholder="Email" className="border p-2 w-full" />
      <input name="password" type="password" placeholder="Password" className="border p-2 w-full mt-2" />
      <button className="bg-blue-600 text-white w-full p-2 mt-4">Login</button>
    </form>
  )
}
```

---

## Register Page
```tsx
'use client'

export default function Register() {
  async function register(e) {
    e.preventDefault()
    await fetch('/api/users', {
      method: 'POST',
      body: JSON.stringify({
        name: e.target.name.value,
        email: e.target.email.value,
        password: e.target.password.value,
        role: 'patient'
      })
    })
  }

  return (
    <form onSubmit={register} className="p-8 max-w-md mx-auto">
      <input name="name" placeholder="Name" className="border p-2 w-full" />
      <input name="email" placeholder="Email" className="border p-2 w-full mt-2" />
      <input name="password" type="password" placeholder="Password" className="border p-2 w-full mt-2" />
      <button className="bg-green-600 text-white w-full p-2 mt-4">Register</button>
    </form>
  )
}
```

---

## Dashboard Page
```tsx
import { getServerSession } from 'next-auth'
import { authOptions } from '@/lib/auth'

export default async function Dashboard() {
  const session = await getServerSession(authOptions)
  return (
    <div className="p-6">
      <h1 className="text-2xl font-bold">Welcome {session?.user?.name}</h1>
    </div>
  )
}
```

---

# ‚öôÔ∏è ENV FILE
```env
DATABASE_URL=postgresql://user:password@localhost:5432/healthcare
NEXTAUTH_SECRET=supersecret
```

---

## ‚ñ∂Ô∏è RUN LOCALLY
```bash
npm install
npx prisma migrate dev
npm run dev
```

---

## ‚úÖ FEATURES
- Authentication
- Secure backend
- Patient/Doctor roles
- Appointments
- Full CRUD ready
- Production structure

---

## üöÄ READY FOR DEPLOYMENT (VERCEL)

